---
import LayoutNav from "../../layouts/Layout-nav.astro";

export const prerender = true;

export async function getStaticPaths() {
  const posts = await Astro.glob("../../content/blog/*.md");

  return posts.map((post) => ({
    params: { slug: post.frontmatter.slug },
    props: { post },
  }));
}

const { post } = Astro.props;

// Formato fecha
const formatDate = (date) =>
  new Intl.DateTimeFormat("es-ES", {
    day: "2-digit",
    month: "long",
    year: "numeric",
  }).format(new Date(date));
---

<LayoutNav
  title={post.frontmatter.title}
  description={post.frontmatter.description ||
    post.frontmatter.excerpt ||
    `Lee el artÃ­culo ${post.frontmatter.title} en el blog de Nils Pineda.`}
  image={post.frontmatter.image}
>
  <article class="px-6 lg:px-40 py-20 max-w-4xl mx-auto">
    <a
      href="/blog"
      class="inline-flex items-center text-primary-400 hover:text-white mb-8 transition-colors"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="h-5 w-5 mr-2"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
      </svg>
      Volver al blog
    </a>

    {/* Imagen destacada */}
    {
      post.frontmatter.image && (
        <img
          src={post.frontmatter.image}
          alt={post.frontmatter.title}
          class="w-full rounded-2xl mb-10 object-cover max-h-[500px]"
        />
      )
    }

    <h1 class="text-white text-4xl md:text-5xl font-bold mb-4 leading-tight">
      {post.frontmatter.title}
    </h1>

    <p class="text-gray-400 text-sm mb-10 border-b border-white/10 pb-6">
      Publicado el {formatDate(post.frontmatter.date)}
    </p>

    {/* Contenido del markdown */}
    <div class="prose prose-lg prose-invert max-w-none text-gray-300">
      <post.Content />
    </div>
  </article>
</LayoutNav>
